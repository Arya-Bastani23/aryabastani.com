{"componentChunkName":"component---src-templates-blog-post-js","path":"/projects/pf-slam/","result":{"data":{"mdx":{"body":"var _excluded = [\"components\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\nvar _frontmatter = {\n  \"templateKey\": \"project\",\n  \"published\": true,\n  \"title\": \"Particle Filter SLAM\",\n  \"slug\": \"pf-slam\",\n  \"date\": \"2021-03-02T00:00:00.000Z\",\n  \"featureImage\": \"images/filter_close.png\",\n  \"pinned\": true,\n  \"tags\": [\"State Estimation\", \"Lidar\"],\n  \"excerpt\": \"A discussion on my approach to solving the simultaneous localization and mapping (SLAM) problem for a mobile vehicle and attempt to understand the shortcomings of the given implementation.\"\n};\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\nvar PostButton = makeShortcode(\"PostButton\");\nvar PostVideo = makeShortcode(\"PostVideo\");\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", {\n    \"id\": \"report\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Report\", mdx(\"a\", {\n    parentName: \"h1\",\n    \"href\": \"#report\",\n    \"aria-label\": \"report permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"As this was part of my graduate studies I cannot publish the code but the below button will take you to the formal writeup associated with the project. Also the report has \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"much\"), \" more detail than this post will so I highly advice you look through it for more information, here I will be focusing on high level principles and results.\"), mdx(PostButton, {\n    text: \"Report\",\n    target: \"/reports/pf_slam.pdf\",\n    mdxType: \"PostButton\"\n  }), mdx(\"h1\", {\n    \"id\": \"introduction\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Introduction\", mdx(\"a\", {\n    parentName: \"h1\",\n    \"href\": \"#introduction\",\n    \"aria-label\": \"introduction permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"In this paper we will discuss an approach to solving the simultaneous localization and mapping (SLAM) problem for a mobile vehicle and attempt to understand the shortcomings of the given implementation. Possible improvements will be suggested along the way alongside the state of the current results.\"), mdx(PostVideo, {\n    video: mapping_video,\n    mdxType: \"PostVideo\"\n  }), mdx(\"h1\", {\n    \"id\": \"importance-of-slam\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Importance of SLAM\", mdx(\"a\", {\n    parentName: \"h1\",\n    \"href\": \"#importance-of-slam\",\n    \"aria-label\": \"importance of slam permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"The problem of localizing a mobile robot within an unknown map is one that has many novel uses in modern robotics. In many applications we don't have the luxury of a predetermined map, but the usage of landmarks and correspondence can help to maintain a correct localization. A solution to this problem falls into the family of problems called SLAM. A utility of this method is for navigation and creation of a map for any unknown or changing space where a map is either not available or needs to be updated realtime.\"), mdx(\"h1\", {\n    \"id\": \"summary-of-approach\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Summary of Approach\", mdx(\"a\", {\n    parentName: \"h1\",\n    \"href\": \"#summary-of-approach\",\n    \"aria-label\": \"summary of approach permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"There are a variety of ways to solve this family of problems but we are tasked to solve this using a particle filter for state prediction and lidar correspondence for landmarks within the map. The process of creating the map and maintaining a position within the map is as follows:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Initialize map with first lidar scan and start coordinate system there.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Initialize particles with the same state as the vehicle $\", \"[0,0,0]\", \"$ and equal weights.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Predict the state of a set of dispersed particles and measure the degree of correspondence of each particle against the map up to the point.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Normalize the weights of the particles such that the sum of all weights is 1.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Predict new robot state with a weighted average of the particle states.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Update the map with a new prediction of the robot state given the best approximation of state. Repeat 3-6.\")), mdx(\"h1\", {\n    \"id\": \"problem-formulation\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Problem Formulation\", mdx(\"a\", {\n    parentName: \"h1\",\n    \"href\": \"#problem-formulation\",\n    \"aria-label\": \"problem formulation permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"Here we will discuss more precisely the problem we are trying to solve and the associated mathematical quantities that will help us.\"), mdx(\"h1\", {\n    \"id\": \"problem-statement\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Problem Statement\", mdx(\"a\", {\n    parentName: \"h1\",\n    \"href\": \"#problem-statement\",\n    \"aria-label\": \"problem statement permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"In this problem we are given sensor data from a mobile vehicle and are tasked with predicting the state of the vehicle over time using a map of its surroundings that we generate along the way. We are given the data of 3 different sensors: a fiber optic gyroscope (FOG), wheel encoder readings, and a front-scanning lidar.\"), mdx(\"h2\", {\n    \"id\": \"localization-problem\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Localization Problem\", mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#localization-problem\",\n    \"aria-label\": \"localization problem permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"Localization deals with understanding the position of a robot in a given map.\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Input: A given map $m$ and a sequence of controls $u$\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Objective: Obtain a sequence of states $x$ of the robot's path\")), mdx(\"h2\", {\n    \"id\": \"mapping-problem\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Mapping Problem\", mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#mapping-problem\",\n    \"aria-label\": \"mapping problem permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"Mapping deals with logging the landmarks of a robot's surroundings.\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Input: A sequence of states $x$ and observations $z$\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Objective: Obtain a map $m$ of the robot's surroundings\")), mdx(\"h2\", {\n    \"id\": \"slam-problem\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"SLAM Problem\", mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#slam-problem\",\n    \"aria-label\": \"slam problem permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"SLAM is doing both localization and mapping with a limited understanding of both.\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Input: A sequence of controls $u$ and observations $z$\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Output: A sequence of states $x$ and a map of surroundings $m$\")), mdx(\"p\", null, \"A particle filter is a special kind of bayes filter that does not assume anything about the world that we'll use to solve this problem.\"), mdx(\"h1\", {\n    \"id\": \"data-cleaning\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Data Cleaning\", mdx(\"a\", {\n    parentName: \"h1\",\n    \"href\": \"#data-cleaning\",\n    \"aria-label\": \"data cleaning permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"A good first step is to process the data into a form that makes this problem more tractable and allow for easier correspondence between sensors. We'll go through the step taken for each sensor's data.\"), mdx(\"h2\", {\n    \"id\": \"fiber-optic-gyroscope\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Fiber Optic Gyroscope\", mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#fiber-optic-gyroscope\",\n    \"aria-label\": \"fiber optic gyroscope permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"The data from the FOG is in $\\\\text{rad/s}$ which is not immediately useful to us. It's also sampled 10x faster than both the lidar and encoders. I chose to compute $\\\\Delta \\\\theta$ as $\\\\tau \\\\dot{\\\\theta}$ and summed the changes over every 10 samples to bring the samples inline with the other sensors.\"), mdx(\"h2\", {\n    \"id\": \"wheel-encoders\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Wheel Encoders\", mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#wheel-encoders\",\n    \"aria-label\": \"wheel encoders permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"Wheel encoders were more straightforward than the FOG. Given $\\\\frac{ticks}{rev}$ and the sample time it was easy to compute $\\\\tau$ and $\\\\Delta Ticks$ to determine the wheel linear velocity at each sample time as:\"), mdx(\"p\", null, \"$$\\n\\\\dot{x}=\\\\frac{\\\\Delta \\\\text{Ticks} \\\\, \\\\pi \\\\, \\\\text{D}_{\\\\text{wheel}}}{\\\\Delta \\\\tau \\\\, \\\\text{TPR}}\\n$$\"), mdx(\"p\", null, \"The result of this are estimated linear velocities at the wheels,but as we can see we cannot really purely on the readings as we can see some slipping on the right wheel.\"), mdx(\"p\", null, mdx(\"figure\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-figure\",\n    \"style\": {}\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"figure\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1200px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/3b7a68a6cccb28eb8e7e5a434e038aac/00711/velocity_wheel_left.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"66.66666666666666%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAD2EAAA9hAHVrK90AAADeUlEQVQ4yz2S308cVRTHj7YxtTyY7YvxWSLYaMBCLVrLook+qInGf0HbYmJsU1uVxMRgJJQupfiDNVLXVFMeNKYLdG1KqsmCrfKjLUqQAjM7O7Nd2N3Znd2dGebXnbn3mDulnuTknvvrc8653wvT09MPpFIpEAThMVmWD9zN5Z4RJakNmd068/tUdOjcuTfOxGJvffX1yOuxwcE34/H4q2vr622CmNmXyWT2SZLUtrq62jo6OrojmUwCIOIORARFUU57noeO6/pIfZwVSigWasgCHwkhyNcs28ZyzcBcLodyVsJsNouSJKGiKFvpdHrPyspKCHxwGxjDe0YQkZ2fkZiobjEeL8hVJmsWq9uEOSQI15Y3dFazCOUXPM8zJiYmIvPz8wADAwO7AABKJbUPkYVA1w+YWDKZ4ZDw8tRygV38S2bXhTKTK1ssoIyNL+ZZxXRDoOt6RjI5HpmdnQPo6el5GAAaSsXCaYcESCkjPqVYNl00HZ/PMaOamF5TcU7SsGK66PkU57MaWp7PqhZB03KMmWtXIv/cvgnw/rHjuwFgZ7FY7BdKJj9MAsqwpDtoOAQZYyiqJl4XynhLrmLN8vCGUMaVTR3/WFfZXFbj725cnpyILC3eBDjS/W4DB+Y2i33rRSNs2Q8oqoYbArn9u6EjT8a9qDu4qFTxTkHHnxdybGa9jIFPjLGffoks3loAePudwxz4UH5jsz+nWUgZI7z1quX9D1zK17FuE5QrW6hULOSJeZyvWlycbVHGI39z4NDZs7u4yuVSsV+3CfoBdU3Xp6ZDqOEQGlBGVcOlnk/D8W7VomtFIxzzVSsQVBNd161fSU3eq/D+P9TKakznIjBE0/XRIRRNNwjnPBE3LrnMKyyZyMW4UzBwtWiiT4j3a2pyTyjKfWBWynys6VtaTq2vKWpdNC1bzFf00E3bW6VBsGY7riBsVkW+b9m2qOmmmK8YWVWrLaWnLj+yfHseoLe3Fw4f7YYjR7t3nzj23qNd0ejjnYcOPvFcx4EnX4x2Nj67f//elqefam9qaupoaWlpfe2Vlxq7Dnbs7Yp2Nna98Hzzy12Hmtvb25tTV3+DD059BJBIJODLkTgMnBmEHxPfwjfxOIz98D1cSJyHkS+GQJGz/N83bPvOvk8+hD+vJuHCd6Nw6WICrl0ag+HhYTh+4iR8+tnn8B8EBA2DiqfqMAAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Right Wheel Velocity\",\n    \"title\": \"Right Wheel Velocity\",\n    \"src\": \"/static/3b7a68a6cccb28eb8e7e5a434e038aac/8537d/velocity_wheel_left.png\",\n    \"srcSet\": [\"/static/3b7a68a6cccb28eb8e7e5a434e038aac/eed55/velocity_wheel_left.png 300w\", \"/static/3b7a68a6cccb28eb8e7e5a434e038aac/7491f/velocity_wheel_left.png 600w\", \"/static/3b7a68a6cccb28eb8e7e5a434e038aac/8537d/velocity_wheel_left.png 1200w\", \"/static/3b7a68a6cccb28eb8e7e5a434e038aac/d2cc9/velocity_wheel_left.png 1800w\", \"/static/3b7a68a6cccb28eb8e7e5a434e038aac/00711/velocity_wheel_left.png 2400w\"],\n    \"sizes\": \"(max-width: 1200px) 100vw, 1200px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \"), \"\\n    \", mdx(\"figcaption\", {\n    parentName: \"figure\",\n    \"className\": \"gatsby-resp-image-figcaption\"\n  }, \"Right Wheel Velocity\"), \"\\n  \"), \"\\n\", mdx(\"figure\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-figure\",\n    \"style\": {}\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"figure\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1200px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/9154fa40088be90b92866d47957377d1/00711/velocity_wheel_right.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"66.66666666666666%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAD2EAAA9hAHVrK90AAADJklEQVQ4y32S32sUVxTHj0TaoA+yvhSfDTHGKv6IMQ/RbapFCkLt/9AaISUgS1B8McRfiV2WlJAE0hpMHhoU7G6aphaL1MQXd3X9ETVusuPszCab7OyP2Zndmdm5s3vvkTtpoyD1wIFzD/f7Oeeec2F2dnbD9PQ0LC4ubpMk6VAymdwnSfKBrJLeNz4+ftzv938bCARODg4OnvD7/ScDgcA30Wi0WZbl/YIg7BdF8UAsFts7MjJSEwwGARCxBhFBkqQ+QgjahFQch6BaNNEq28hjnncIwULRxJVMDgUhjolEwnVRFFGWZWNmZmbr/Pz8O2A6nb6Ka+YgItOtCqtQxnj8EadcQAgpTk5OeiKRCMDAwMCnALAxlUr1MsaQMeYCCyZhToW6Qsr+19aBoVDIEw6HATo6OjYDQI2u6z3vAdEiVay6vA+NsfU8+wDo8/k2AcAniqJceR849TyFYtZwVUqxjCapoFOlbhF+r2ASLDvVdWAwGPI85MDOzk4XmMvlLuNaZYeL7r1WcFUru8CZhYxbIJLI40rBcnN3X6WxWHZcQblsF6enfvdEImGAU+3t/Mm1HLikmlipUod3IOUMtwsev8mU8MFiBh9LKqoGwfkVHeeWNIxKKnuxrK0D5548BrjS21fLt7yUWr0sZEpIGbMrlFJBKdG8YfOh0xfLGpVzBo0rRbqsWvRpsuDG92NKNSzm+dfSbt3+zfM0+ujdt9EKap9mOcj3YJIqZksE+ZlbWrfdaZTsCkp5E+NKyc0lVQvjGQMdxyF//jG19Rnv8D9gQnxzLqcb+aWstiBnNMEwLSGV04XlrC4YZRJjtLpg2yQurKpCIl0QioYlrOR1QcpoiWy+MPfPX1NbXj6JAHR3d8N3p07D9+2nN53p/OGzL7ze7d7DrfUth5p3tnmP1DUfPNi4+/NdTfU7drTs3rNn79fH2uraWlsaj7Z5677ytjYc//JIQ1NTU8Odv++Br+sswOjoKAwMDUPvtR9h/PoIDA8Nwa9jozB2/WcY/CkAspQAANj8r2+8eL4LHt4NwcSNX+DOzRtwf3IC+vv74YyvCy70XIK3fY8U0wWeOkgAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Right Wheel Velocity\",\n    \"title\": \"Right Wheel Velocity\",\n    \"src\": \"/static/9154fa40088be90b92866d47957377d1/8537d/velocity_wheel_right.png\",\n    \"srcSet\": [\"/static/9154fa40088be90b92866d47957377d1/eed55/velocity_wheel_right.png 300w\", \"/static/9154fa40088be90b92866d47957377d1/7491f/velocity_wheel_right.png 600w\", \"/static/9154fa40088be90b92866d47957377d1/8537d/velocity_wheel_right.png 1200w\", \"/static/9154fa40088be90b92866d47957377d1/d2cc9/velocity_wheel_right.png 1800w\", \"/static/9154fa40088be90b92866d47957377d1/00711/velocity_wheel_right.png 2400w\"],\n    \"sizes\": \"(max-width: 1200px) 100vw, 1200px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \"), \"\\n    \", mdx(\"figcaption\", {\n    parentName: \"figure\",\n    \"className\": \"gatsby-resp-image-figcaption\"\n  }, \"Right Wheel Velocity\"), \"\\n  \")), mdx(\"h2\", {\n    \"id\": \"lidar\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Lidar\", mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#lidar\",\n    \"aria-label\": \"lidar permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"Lidar did not have much preprocessing as much of the processing happens during the mapping steps. All I did was reform the data structures here to be inline with how I present the data from before.\"), mdx(\"h2\", {\n    \"id\": \"across-all-sensors\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Across All Sensors\", mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#across-all-sensors\",\n    \"aria-label\": \"across all sensors permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"Once I had all sensors cleaned up and at the same sampling rate I trimmed the data such that I had the largest data set where all sensors were sampled and times were inline.\"), mdx(\"h1\", {\n    \"id\": \"dead-reckoning\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Dead Reckoning\", mdx(\"a\", {\n    parentName: \"h1\",\n    \"href\": \"#dead-reckoning\",\n    \"aria-label\": \"dead reckoning permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"Although dead reckoning is not necessary for the particle filter SLAM, it's a good step to build some intuition of the data and many of the steps translate well into the SLAM predict step. The integration steps done here are the base of updating the particle states in the prediction step.\"), mdx(\"h2\", {\n    \"id\": \"motion-model\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Motion Model\", mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#motion-model\",\n    \"aria-label\": \"motion model permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"The motion model used to describe the rates of the states of the vehicle is a differential drive model. The motion model is as follows:\"), mdx(\"p\", null, \"$$\\n\\\\dot{X} = \\\\left\", \"[ v \\\\cos(\\\\theta), v \\\\sin(\\\\theta), \\\\dot{\\\\theta}\\\\right]\", \"\\n$$\"), mdx(\"p\", null, \"Where $v$ is the centerline velocity (average wheel velocity) and theta is the heading of the robot.\"), mdx(\"h2\", {\n    \"id\": \"euler-integration\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Euler Integration\", mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#euler-integration\",\n    \"aria-label\": \"euler integration permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"Once the rates were determined at each time I compute the changes in the 3 states over each sample and applied a cumulative sum to get the estimated state over time. The changes were computed as an euler integration:\"), mdx(\"p\", null, \"$$\\nX_{t+1}=X_i + \\\\tau \\\\dot{X}\\n$$\"), mdx(\"p\", null, \"where $X$ is a vector of states and $\\\\dot{X}$ are the state derivatives from the motion model. The code below produces the path plotted below.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-python\"\n  }, \"# Dead-Reckon (Euler)\\nv = np.sum(wheel_v[1:], axis=0) / 2\\nw = fog_w[3]\\ndt = wheel_v[0] - np.hstack((np.array([0]), wheel_v[0,:-1]))\\ntheta = np.cumsum(np.multiply(w, dt))\\ntime = np.cumsum(dt)\\n\\n# Get derivs [xdot, ydot, thetadot] x N\\nderivs = np.zeros((3, dt.size))\\nderivs[0] = np.multiply(v, np.cos(theta + w*dt))\\nderivs[1] = np.multiply(v, np.sin(theta + w*dt))\\nderivs[2] = w\\n\\n# Compute Changes\\ndeltas = np.multiply(derivs, dt)\\n\\n# Compute estimated state by summulative sum or prior deltas\\nstate = np.cumsum(deltas, axis=1)\\n\")), mdx(\"p\", null, mdx(\"figure\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-figure\",\n    \"style\": {}\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"figure\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1200px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/88538e36a56e5b9c5b2034f540cf13b2/99e71/deadreckon_path.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"100%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB5ElEQVQ4y51Uaw+jIBDs//+TTZP2W5O2iiLs6zIroKi5S24T4spjmNkHNzNLIQS+3+/8eDz49Xrx8/n0r4iwqv5zYF/dezMzTikZBhEZUfYvM5uqdgN2nBNV+w2Dvd9vP9MAmUjdzHByHSuKVut83UxElJndv4FmjNFiCJpStsxiMZNNiSwRG7MAZmMkcmK5H84QEqVqQlABJGoLiY1DsClmI2nLnfz9nAMimL/fDze7EhaxTLwdUPV/MI5hMva1M7PK3BlCMgABIg4gVn0YsbgvzM4e/1cJaoCeFGY/TX5gY4jMpUydTAAi1nqQe5KMxTlMRgAoqV6m2XLKnTTz0KjNYzAt5dUkExGXunPAzNqk4o4sekpE9XFuH+/GcJqmxhDxQ5yqNJa+bI6Fjj0YHeAwDC3L+xgtmVeJtrK+yiwuq/XakoLAV8mF/ya5MLALyaV5/AtlDgi07/fbMQTQ6q/lsaCTYiyXHDqlyK5hOtXh1UOwxpbXbinF7nMp2TzNnvEWw9rLfwNsHVOSRLLGGDUrfMgyyuYsWU4PQfWRqH1WL1vPHwfZdf9/Wtd6MUbFd1kWT0DO2eZ5tvr4bnPR9+zX8Q+/PbCe9pzxUPoGLMJQ8PX1/nw+LgvAAMCZcRytnsFe2B8e0iw1nLfGvAAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Dead Reckon Vehicle Path\",\n    \"title\": \"Dead Reckon Vehicle Path\",\n    \"src\": \"/static/88538e36a56e5b9c5b2034f540cf13b2/8537d/deadreckon_path.png\",\n    \"srcSet\": [\"/static/88538e36a56e5b9c5b2034f540cf13b2/eed55/deadreckon_path.png 300w\", \"/static/88538e36a56e5b9c5b2034f540cf13b2/7491f/deadreckon_path.png 600w\", \"/static/88538e36a56e5b9c5b2034f540cf13b2/8537d/deadreckon_path.png 1200w\", \"/static/88538e36a56e5b9c5b2034f540cf13b2/d2cc9/deadreckon_path.png 1800w\", \"/static/88538e36a56e5b9c5b2034f540cf13b2/99e71/deadreckon_path.png 2000w\"],\n    \"sizes\": \"(max-width: 1200px) 100vw, 1200px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \"), \"\\n    \", mdx(\"figcaption\", {\n    parentName: \"figure\",\n    \"className\": \"gatsby-resp-image-figcaption\"\n  }, \"Dead Reckon Vehicle Path\"), \"\\n  \")), mdx(\"h1\", {\n    \"id\": \"particle-filter-slam\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Particle Filter SLAM\", mdx(\"a\", {\n    parentName: \"h1\",\n    \"href\": \"#particle-filter-slam\",\n    \"aria-label\": \"particle filter slam permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"Here we will go into detail about how the implementation for particle filter SLAM was formed. I will relay the steps that map well to function defined in my code that I determined as distinct steps in this process. Note that I can't publish much code here as this was the meat of the assignment.\"), mdx(\"h2\", {\n    \"id\": \"initialize-particles\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Initialize Particles\", mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#initialize-particles\",\n    \"aria-label\": \"initialize particles permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"First step taken is to initialize N particles to the initial state of the vehicle $\", \"[0, 0, 0]\", \"$ with weights of $\\\\frac{1}{N}$. As we are not trying to localize the robot in a given map it does not make sense to disperse the particles initially but to instead start them on top of the robot.\"), mdx(\"h2\", {\n    \"id\": \"lidar-projection\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Lidar Projection\", mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#lidar-projection\",\n    \"aria-label\": \"lidar projection permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"This helper function makes it easier to project the lidar scan into the robot coordinate system. it utilizes the rotation and translation matrix as given by the geometry of the robot. The primary equation used is:\"), mdx(\"p\", null, \"$$\\nX\", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"{car} = R \\\\, X\"), \"{lidar} + T\\n$$\"), mdx(\"p\", null, \"Where $X\", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"{car}$ is the 3D coordinate of a lidar scan in the car coordinates, $R$ is the rotation matrix from the lidar coordinates to the car, $X\"), \"{lidar}$ is the position of the scan in lidar coordinates, and $T$ is the translation from lidar to car.\"), mdx(\"h2\", {\n    \"id\": \"initialize-map\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Initialize Map\", mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#initialize-map\",\n    \"aria-label\": \"initialize map permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"We initialize a map of all zeros and apply the first lidar scan where endpoints increase the value in the grid by 4 and open space decreases the value of the grid by 4. The sign conventions of these changes are based on applying a sigmoid to the map later to determine the probabilities that a space if occupied.\"), mdx(\"h2\", {\n    \"id\": \"predict-new-particle-states\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Predict New Particle States\", mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#predict-new-particle-states\",\n    \"aria-label\": \"predict new particle states permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"Here the particles are updated to new states following the integrated motion model output at the given time. The difference compared to dead reckoning is that we add noise to disperse the particles around the dead reckoned state to capture other possible states. The update for a given particle is as follows:\"), mdx(\"p\", null, \"$$\\nX_{t+1}=X_i + \\\\tau \\\\dot{X} + \\\\mathcal{N}(0, \\\\sigma)\\n$$\"), mdx(\"p\", null, \"As you can see, normal noise is added to the particles with a different standard deviation for translational noise ($x$ and $y$) and rotational noise ($\\\\theta$).\"), mdx(\"h2\", {\n    \"id\": \"update-particle-weights\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Update Particle Weights\", mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#update-particle-weights\",\n    \"aria-label\": \"update particle weights permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"Here the particle weights are updated with the aforementioned lidar map correlation metric. This is done by applying the $t+1$ lidar scan to all particles and seeing how well they correspond with the prior map. Weights are stored as this correlation score with the particles.\"), mdx(\"h2\", {\n    \"id\": \"normalize-weights\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Normalize Weights\", mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#normalize-weights\",\n    \"aria-label\": \"normalize weights permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"For the following step, we need to normalize the weights such that they sum to 1. This is done using the softmax activation method as follows:\"), mdx(\"p\", null, \"$$\\nW = \\\\frac{e^{w\", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"i}}{\\\\sum\"), \"{j = 1}^{N} e^{w_j}}\\n$$\"), mdx(\"p\", null, \"Where $W$ is the vector of weights for all particles being overwritten by the softmax activation over each prior weight (Note: overwriting occurs after all new elements have been computed), and $N$ is the number of particles.\"), mdx(\"h2\", {\n    \"id\": \"estimate-robot-state\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Estimate Robot State\", mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#estimate-robot-state\",\n    \"aria-label\": \"estimate robot state permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"We now have a set of $N$ particles and their respective weights. We approximate the new state of the robot as a weighted average of the particle states. This is as follows:\"), mdx(\"p\", null, \"$$\\nX\", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"{robot}= \\\\sum\"), \"{i = 1}^{N} X_i \\\\, W_i\\n$$\"), mdx(\"p\", null, \"We can now also compute the weighted variance of the estimation as:\"), mdx(\"p\", null, \"$$\\nVar = \\\\sum\", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"{i = 1}^{N} (X_i - X\"), \"{robot})^2 \\\\, W_i\\n$$\"), mdx(\"p\", null, \"Note: The states and variance are vectors in the prior equations.\"), mdx(\"h2\", {\n    \"id\": \"update-map\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Update Map\", mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#update-map\",\n    \"aria-label\": \"update map permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"This step is very similar to the initialize map step but instead of a matrix of zeros we have the matrix of the prior map. We apply the same $\\\\pm 4$ with the current lidar scan applied to the estimated robot state. To ensure we don't get numerical overflow and overly confident probabilities for cell occupancy we cap the values of grid sums to $\\\\pm 100$.\"), mdx(\"h2\", {\n    \"id\": \"resample\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Resample\", mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#resample\",\n    \"aria-label\": \"resample permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"Lastly, if need be we resample the particles via sample important resampling. This method repositions particles relative to the weights of the prior particles. This way we focus our efforts on particles that performed well.\"), mdx(\"h2\", {\n    \"id\": \"filter-map\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Filter Map\", mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#filter-map\",\n    \"aria-label\": \"filter map permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"The prior steps, starting with predict new particles, are repeated for the robot runtime but in post if you want to save the map as probabilities you can apply the sigmoid function to convert the log-odds grid sums to occupancy probabilities. This is done as follows:\"), mdx(\"p\", null, \"$$\\np(m\", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"{i,j}) = \\\\frac{e^{m\"), \"{i,j}}}{1+e^{m_{i,j}}}\\n$$\"), mdx(\"p\", null, \"Where $m\", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"{i,j}$ is the sum of a particular grid element. This normalizes the sums in the grid elements to probabilities that they are occupied. This also explains why we start the matrix for the map as all zeros. When passed into the sigmoid, grids of 0 would yield $p\"), \"{i,j}=0.5$. In other words, we are equally uncertain about whether the grid space if occupied or not.\"), mdx(\"h2\", {\n    \"id\": \"main-code-loop\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Main Code Loop\", mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#main-code-loop\",\n    \"aria-label\": \"main code loop permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"Many of the prior steps are written as helper functions and are pieced together as follows:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-python\"\n  }, \"# Number of particles\\nN = 30\\nparticles = init_particles(N)\\n\\n# Motion Model Noise\\n# Translational noise and rotational noise\\nstd_noise = np.array([0.002, 0.00003])\\n\\n# Estimated robot state data structure [x,y,heading] and variance\\nrob_state = np.zeros((dts.size, 3))\\nrob_var = np.zeros((dts.size, 3))\\n\\n# Define Starting Map\\nrob_map = init_map(1600, 1600, 200, 200, d_lids[0])\\n\\n# Iterate over data\\nfor i in range(dts.size-1):\\n\\n    # Determine Control\\n    control = motion_model(vs[i], ws[i], dts[i], rob_state[i,2])\\n\\n    # Predict new states\\n    particles = predict(particles, control, dts[i], std_noise)\\n\\n    # Update Weights\\n    particles = update(rob_map, particles, d_lids[i+1])\\n\\n    # Norm Weights\\n    particles = norm_weights(particles)\\n\\n    # Estimate New State\\n    new_state, state_var = estimate_state(particles)\\n    rob_state[i+1] = new_state\\n    rob_var[i+1] = state_var\\n\\n    # Update Map\\n    rob_map = update_map(rob_map, rob_state[i+1], d_lids[i+1])\\n\\n    # Resample If Needed\\n    n_eff = 1 / np.sum(particles[:,-1] ** 2)\\n    if n_eff <= 5:\\n        particles = resample(particles)\\n\")), mdx(\"h1\", {\n    \"id\": \"results\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Results\", mdx(\"a\", {\n    parentName: \"h1\",\n    \"href\": \"#results\",\n    \"aria-label\": \"results permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"I'll discuss the results of the filtering and present some of the maps created during the process.\"), mdx(\"h2\", {\n    \"id\": \"mapping\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Mapping\", mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#mapping\",\n    \"aria-label\": \"mapping permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"The resultant maps looks quite nice!\"), mdx(\"p\", null, mdx(\"figure\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-figure\",\n    \"style\": {}\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"figure\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1200px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/ec2989fe59ad030e6cfddf9f9530716c/99e71/deadreckon_map_img.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"100%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAADgUlEQVQ4y51USU8baRDll0SKlOQAEkQQiCBSAMFMEJaygDQDZIFADk4GDB6EYg6OMNHYLBJ2t7vbbey2A5FHBu6ZnzFe2DdrDogTm9ih/b2ovo5tPD6MNIenr9xd/erVq/JXBOByd3dXj8Viejwe1xOJBD/39vb0/f39/8Th4aF+fHysHx0d6ZeXl3oRAH1jYwOCIECWZQQCAUxPT/PT75+Govjg8/mgqmoe/H4/vF4vvn37C6nUP4jF/sbOzg444dbWFiRJYqIoMqt1kA0N2ZjLNcYEwcM0LcBCIY3JssK8Xi+jPFmWOShWVZVpWpDHyWSSZRXSA0EQ8f79ADo6unDrVgkqKxvR2PgCZnMfJMmLcDjEFVMniqJwUEyYmppCIpFAlpCqU8Ls7BdMTEziwYNHcLkm8OHDAJqb23HnTjna2l5xErKE2s2QkiUejydHuLS0xBVKkuFhf//vqK39GaFQEJHIVwwPD+P27WLU1f2EsrKHcDhGMTPzBZSfIXS73TnCVCoF8k+SJJ7Y2voLmpqeIRwO8wE0N7egt9fCyc3m33D3bim6u9/9UCoVEuYUStwnk6kFb968xezsDByOz2hoMCEQMD6mgna7HffulWF09A+eTx7mtby5uZn1UFV9qKt7gpERB6LRP9HR8RZdXe8QDAaoKPcuGAxygvb2bnz6NAJNC+aGkk6n9eXl5SyhoshoaGjC8+dtsFgGYTK94Dsny0p2ukRKip1OF+7fr8bY2BgvFo/HCxWSH7Tk/f1W1Nc/QWXlYwwODv1QKGdJRdFYo87OHtTU1EIUhVzL6+vrWcLMB6GQxlV8/GhDSUkF+vqsvDXy0RiEgnBY40WKiytgs9mwsrJiEOa3bJBSCwQiFgQPSkur0Ntr5UOhZ6IooqfHjOrqerx82ck9TCaThS3fVEmn4VcA4+PjqKh4BLt9BK9fd6O8vAZPn7Zy/6hA3pQXFxf52mQIb/6lKCalRGqxDKCq6jFaWn6F0+nkRMbA5Pw93N7ezlOYT5qLjRtG5ES01FSInhcsNimk24NeEP5NfBM+n5p3ORi7qxYuttvtpusL/wekdHJyMreHa2triEajbH5+HhlEo9HsubCwkPebzrm5OY5MHIlEsLq6iiLGmH5ycoLr62um6zrS6TSurq5wfn7O49PTUzDGcHBwAHp/dnZGubi4uOCgmHIol3i+A7F/elCgvO8dAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Dead Reckon Map\",\n    \"title\": \"Dead Reckon Map\",\n    \"src\": \"/static/ec2989fe59ad030e6cfddf9f9530716c/8537d/deadreckon_map_img.png\",\n    \"srcSet\": [\"/static/ec2989fe59ad030e6cfddf9f9530716c/eed55/deadreckon_map_img.png 300w\", \"/static/ec2989fe59ad030e6cfddf9f9530716c/7491f/deadreckon_map_img.png 600w\", \"/static/ec2989fe59ad030e6cfddf9f9530716c/8537d/deadreckon_map_img.png 1200w\", \"/static/ec2989fe59ad030e6cfddf9f9530716c/d2cc9/deadreckon_map_img.png 1800w\", \"/static/ec2989fe59ad030e6cfddf9f9530716c/99e71/deadreckon_map_img.png 2000w\"],\n    \"sizes\": \"(max-width: 1200px) 100vw, 1200px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \"), \"\\n    \", mdx(\"figcaption\", {\n    parentName: \"figure\",\n    \"className\": \"gatsby-resp-image-figcaption\"\n  }, \"Dead Reckon Map\"), \"\\n  \"), \"\\n\", mdx(\"figure\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-figure\",\n    \"style\": {}\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"figure\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1200px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/d78bd25cb22ced0843b4213969eaaf9e/99e71/filter_map_img.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"100%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAADdklEQVQ4y51U204TURTlT3jQiAkaE4uQIN4iNVxCIDUBDV6QYFBrTBVaiRCFWDLESltmOqW3aaGWUOBdP0PbAuHe+EDCC7dwh+lZZh+coRUTEx9Wzm7PPuusvdeekwfgYGVlRU0kEmoymeSgeHV1VV1bW/snNjY21K2tLXVzc1M9ODhQ8wCo8/PzEEURXq8XoVAIgUAAwWAQfn8AXu8gBgcH4fP5cuD3+yFJEr5+/YZ0+id+/PiO5eVlcMLFxUV4PB4miiKzWN4wq7WDCUIfGxhwsXA4xBQlxGRZZpIkMcqjmECxz+fj+xSnUimmK/xNiOfPLWhsfIL8/AsoKbkDo7EWL168gix7EImEeRWyLPNViwlOpxPJZBI6Id1OCcPDQ+jv74fBUApBcMBstqC6+h4KCorw8GETAgG/Xq5GSi1xu90nhFNTU1yhxyPz3lksb3Djxh0oShCx2Bd0dnYiP/88SktvwmC4CkEQMDQUoTM6ocvlOiFMp9NkCvWBK7x7tx4VFbWIRCLcgKoqE8zmV4jFomhqasHZsxdhNr9EMBiAJHlOE54oPO5TZWUdmptbEI1G8eFDN8rLqxEKBfnhaHQYVqsNZ85cQF/fJyhKiPcwp+SFhQWukEbE65Vx7ZoRdnsvRkdjaGh4hKdPn3FCupB6Fw4rcDg+4/79ZghCH9/TTclkMur09LRuCrl5+3Ylamsbfhti4gc0NymHSElZV9d7XL5cClEc4HOco1AjpH5IkojXr9tw61YFiouvw2br4GZpJhBEUeLG1NXVw2is5JUlEoljwrm5uSyFxyoUReFNb2+3orCwCG1tb7kq6qNGTIRut4hz5y6hp6cHVCknzC5ZI6VDmkkOhwOFhQbYbO84CfWQSmxtfYmysnI0Nj6G09mPVCp1uuRslbQe90tBd3c3DIYyfPzYiwcPmlFUVIaaGhPsdjtXnuPy5OQkHxuNMPuTopiUUvktLa24cuU6TKYGTkRK6SGRZW/uHC4tLeUo/JtSOuT3+yCKbp2ILqK9U4NNCun1oA3Cn8TZoC8n+3HQ/js12C6Xi782/wNSSsbpYzM7O4t4PM7Gx8ehIR6P6+vExETOb1rHxsY4tHhkZAQzMzPIY4yp29vbODo6YqqqIpPJ4PDwEHt7ezze2dkBYwzr6+ug/d3dXcrF/v4+B8WUQ7nE8wtg2Hqef2zRsQAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Particle Filter Map\",\n    \"title\": \"Particle Filter Map\",\n    \"src\": \"/static/d78bd25cb22ced0843b4213969eaaf9e/8537d/filter_map_img.png\",\n    \"srcSet\": [\"/static/d78bd25cb22ced0843b4213969eaaf9e/eed55/filter_map_img.png 300w\", \"/static/d78bd25cb22ced0843b4213969eaaf9e/7491f/filter_map_img.png 600w\", \"/static/d78bd25cb22ced0843b4213969eaaf9e/8537d/filter_map_img.png 1200w\", \"/static/d78bd25cb22ced0843b4213969eaaf9e/d2cc9/filter_map_img.png 1800w\", \"/static/d78bd25cb22ced0843b4213969eaaf9e/99e71/filter_map_img.png 2000w\"],\n    \"sizes\": \"(max-width: 1200px) 100vw, 1200px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \"), \"\\n    \", mdx(\"figcaption\", {\n    parentName: \"figure\",\n    \"className\": \"gatsby-resp-image-figcaption\"\n  }, \"Particle Filter Map\"), \"\\n  \")), mdx(\"p\", null, \"The changes aren't very apparent which means that the dead reckon was already quite good for determining the path. If we zoom in the changes are a little clearer.\"), mdx(\"p\", null, mdx(\"figure\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-figure\",\n    \"style\": {}\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"figure\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1200px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/2347cbcb0f8ca8eacc5dcc477a58f80d/99e71/deadreckon_close.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"100%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAD6UlEQVQ4y4WUS0hjVxjHj4nXR+PUGSk1vuq4GcMwthkhupmqCFbpaF1VrdBhcJQJuurQcaEzPpDYiM94ExOjiW6sirgSZvY+0NRAo0FFXEgXuvRBUAlezr98JybRaUsv/Lnf5Zz7u//vcS4DEDw+Pla8Xq/i8/mE9vb2lNPTU+Xk5OR/dXZ2pgQCAeX8/FwJBoMKA6AsLy9DlmVMTk7CbrfD6XQKUexwOP5V4+Pj4p0PHz7i8PAv+Hx/4ujoCAJIi8+ff887Ot5zk8nE29ra+ODgIHc6nVyWZW61WiOy2WwR0bPD4eAu16SI/X4/F8Curm4wxrhaLeH+/QfIzExHYWEhWlpaMDExIRR2bLVaYbPZMDY2JkQxaWhoCNvb2yGHDscEUlO/4ikpaVCrP0NsrIY+gJiYGOTn61FcXITq6mpYLBZMTU0J+G0wfWhkZCQKXF1dgcUywru7u2AwGKDRJEOlSgZjCWBMLeAkvf5r1NfXo729HW63O+KYoMPDw1Hg2toahodHuCxbodPlQq1ORGpqOrKyssFYLBj7HJL0BRiLE2Ct9kvU1tahr69PNJKadCdlr9cLasLYmB063SPhKj/fgO7uTlRXV6GiohxJSeQ4EYwl3ThnyMnJFm6pFNRxv98fTnmVLFOnkJeXJzbX1f0Et9uF6elpmEwm1NT8iNLSEpSVfQfGpAg0MTEeWVmZMBqNUYcej4eKyvv6zNBq08XGkpJi0d3R0VFRfKqXy+WC2WxGeXkZysoqcO9exk1JGNRqFebn56NAi8XCzebfEBeXgISEZHR2dtzpJoliSo3A4+MO1NbW4OHDR9BoMgXUapVDwJWVFXqBv337q1jQaFIwNDQoih2GhUUdJbDFMoqZmd/R1NQgDNB7smwPATc3N2kTf/HiZ7GQkqJFf3//HeDtQSYgna7W1lYUFBggSUn/dEhHrKHh5U3BGRobG0Vqtwf4dupUDsooOfmBmAq9/ht4PH+EgOvr6yJlo/E1GFMhOztHpEyN+NRdOGWav3fv2sUhIANVVZU4PDwMATc2NiDLVl5YWCAW09Iy0NPTI9L6r5QJ+PSpHozFQ5LikZf3BDs7O9GU7XY7Lyr6VgCbml6LLoYhn4o+1Nvbi9xcnaifJElobm7G/v5+dGwGBgb448dPIvZdLrc4nzSHdBLoTqKfAJXizZtfoFKFjmJGRjoGBgaxtbUVAu7u7tJfhFdW/gC93oCOjvdYWlrC7OysGNaFhQWhubk5cV9cXITLNYlnz0rR0PAKXV2dmJmZwcHBQQjIOQcPXbi6uqIYdFEcDAZFfHl5iYuLCxHTeiAQgKIo4vn6+lrspetvocr2hcfUJ/IAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Dead Reckon Map\",\n    \"title\": \"Dead Reckon Map\",\n    \"src\": \"/static/2347cbcb0f8ca8eacc5dcc477a58f80d/8537d/deadreckon_close.png\",\n    \"srcSet\": [\"/static/2347cbcb0f8ca8eacc5dcc477a58f80d/eed55/deadreckon_close.png 300w\", \"/static/2347cbcb0f8ca8eacc5dcc477a58f80d/7491f/deadreckon_close.png 600w\", \"/static/2347cbcb0f8ca8eacc5dcc477a58f80d/8537d/deadreckon_close.png 1200w\", \"/static/2347cbcb0f8ca8eacc5dcc477a58f80d/d2cc9/deadreckon_close.png 1800w\", \"/static/2347cbcb0f8ca8eacc5dcc477a58f80d/99e71/deadreckon_close.png 2000w\"],\n    \"sizes\": \"(max-width: 1200px) 100vw, 1200px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \"), \"\\n    \", mdx(\"figcaption\", {\n    parentName: \"figure\",\n    \"className\": \"gatsby-resp-image-figcaption\"\n  }, \"Dead Reckon Map\"), \"\\n  \"), \"\\n\", mdx(\"figure\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-figure\",\n    \"style\": {}\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"figure\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1200px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/e1c371bfbe3d16ea5d3cdea8a375e002/99e71/filter_close.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"100%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAD7UlEQVQ4y4WTW0ibZxjH39lkiSYxg42uo5poi10daqe2HRTaXgxnnbSFdc7eTIWKpetAnYXmYlaLs71RY/Il5mCisIJHBK+6e094iE4SEPXCsgvxzgMRj1++/3iemBhhsA8envf93vf5PcdXADjc2NiQA4GAHAwG5YWFBXl5eVne2tqSNzc3/1e2t7flcDgs7+zsyIeHh7IAIE9NTcHpdKKnpwdutxvd3d3weDxwuVy8/y+hc0mS8P79X/jw4R8sLv6N9fV1MPDduz9RXPydYrG8VBobG5X6+t8Uq9WqeDweRZIkxeFwxMXpdMaF9m63W/H7fbwOhUIKA5ubWyCEUIRIgsGQirS0i8jP/xr19fXwers5UoqatMPh4Gy6urpYaE3S0dGBYDAYjZCMMjK+VM6fT4dWa4RKpSMH0Gg0yMvLQWFhAcrKyhjm9/s53UQwOers7DwFRmvoUBobf0d2djaSk41ISvoEQmggxMcMJ7lxoxAPHz7Aq1dNXG+CEZi01Wo9BU5OTtIPqgPMZhODTCYzcnJyIYQaavWnUKk+O3EgkJ5+EeXl5Zymz+fjCM+kHAgE6AcDL13KhBDnUFJSCqu1A0+f1uD+/VIYDEYIkQwhKHItg3Nzc9Da+gZ2u53TjwPHx8dhs9mUt2/f4PLlLL5MNevt7WUho6qqSgYXFRWdRJrC93Q6LTIzM/H8+a+nwJmZGfKivH7djJQUA9etrOxH7ix5pxpRIwje0tKC0tISFBd/j9TUdM6GwCrVOYyMjESB09PTVFyloaGBD43GzyFJdh7g2FiQxDrr8/nhcnXh8eOfYDJlQa9PZzuHQ4oCx8bGyFiprq7mg7S0zHj3EoGJYIq8r68PT55U8aiRnSR1RYFzc3OQJIdy714xH1y48AVaW/+A2+05A4o5ICCVoK6uDteu5UGt1p0AHadNsdslpbKygmui0xlgsVj4lSQOcGKEXq8XL140QKfT82gVFBSAenGmhrEI8/MLz0ASn1lsmOnFEFCj0bPNo0c/YG1tLQqcnZ1FW1ubYjabIcRHuHnzG9rzwCammxilx+PFlStZPEJqtQbXrxdiaWkpCpyYmOA5vHr1KyQlJcNieQm/v+cMKFGofs3NTTCZMqBW66HValBbW4uVlZUocH5+Hk1NTYpen8rhV1T8zDWiB0/dtNlsrEnon8vlRk1NTXwGKVK6s7i4GAWGQiG0t7crd+7cxa1bd2GzdWJ0dBT9/f0YGhrC8PAw68HBQdZ01t7ehtu3v8WzZ7/wsA8MDGB1dRUiEonIsiwjEokokUgE+/v7iH17e3s4Pj7m9e7ubvyM7oXDYdb0HR0d4eDggNf/AsZf9x5talwLAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Particle Filter Map\",\n    \"title\": \"Particle Filter Map\",\n    \"src\": \"/static/e1c371bfbe3d16ea5d3cdea8a375e002/8537d/filter_close.png\",\n    \"srcSet\": [\"/static/e1c371bfbe3d16ea5d3cdea8a375e002/eed55/filter_close.png 300w\", \"/static/e1c371bfbe3d16ea5d3cdea8a375e002/7491f/filter_close.png 600w\", \"/static/e1c371bfbe3d16ea5d3cdea8a375e002/8537d/filter_close.png 1200w\", \"/static/e1c371bfbe3d16ea5d3cdea8a375e002/d2cc9/filter_close.png 1800w\", \"/static/e1c371bfbe3d16ea5d3cdea8a375e002/99e71/filter_close.png 2000w\"],\n    \"sizes\": \"(max-width: 1200px) 100vw, 1200px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n  \"), \"\\n    \"), \"\\n    \", mdx(\"figcaption\", {\n    parentName: \"figure\",\n    \"className\": \"gatsby-resp-image-figcaption\"\n  }, \"Particle Filter Map\"), \"\\n  \")), mdx(\"p\", null, \"We can see that the particle filter has done a much better job of rectifying that the vehicle merged back into the same lane that was traveled prior whereas the deadreckon map implies otherwise.\"), mdx(\"h1\", {\n    \"id\": \"questions\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Questions\", mdx(\"a\", {\n    parentName: \"h1\",\n    \"href\": \"#questions\",\n    \"aria-label\": \"questions permalink\",\n    \"className\": \"anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), mdx(\"p\", null, \"As always let me know if you have any questions and I'd be happy to answer!\"));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"title":"Particle Filter SLAM","date":"March 2nd, 2021","excerpt":"A discussion on my approach to solving the simultaneous localization and mapping (SLAM) problem for a mobile vehicle and attempt to understand the shortcomings of the given implementation.","featureImage":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAD7UlEQVQ4y4WTW0ibZxjH39lkiSYxg42uo5poi10daqe2HRTaXgxnnbSFdc7eTIWKpetAnYXmYlaLs71RY/Il5mCisIJHBK+6e094iE4SEPXCsgvxzgMRj1++/3iemBhhsA8envf93vf5PcdXADjc2NiQA4GAHAwG5YWFBXl5eVne2tqSNzc3/1e2t7flcDgs7+zsyIeHh7IAIE9NTcHpdKKnpwdutxvd3d3weDxwuVy8/y+hc0mS8P79X/jw4R8sLv6N9fV1MPDduz9RXPydYrG8VBobG5X6+t8Uq9WqeDweRZIkxeFwxMXpdMaF9m63W/H7fbwOhUIKA5ubWyCEUIRIgsGQirS0i8jP/xr19fXwers5UoqatMPh4Gy6urpYaE3S0dGBYDAYjZCMMjK+VM6fT4dWa4RKpSMH0Gg0yMvLQWFhAcrKyhjm9/s53UQwOers7DwFRmvoUBobf0d2djaSk41ISvoEQmggxMcMJ7lxoxAPHz7Aq1dNXG+CEZi01Wo9BU5OTtIPqgPMZhODTCYzcnJyIYQaavWnUKk+O3EgkJ5+EeXl5Zymz+fjCM+kHAgE6AcDL13KhBDnUFJSCqu1A0+f1uD+/VIYDEYIkQwhKHItg3Nzc9Da+gZ2u53TjwPHx8dhs9mUt2/f4PLlLL5MNevt7WUho6qqSgYXFRWdRJrC93Q6LTIzM/H8+a+nwJmZGfKivH7djJQUA9etrOxH7ix5pxpRIwje0tKC0tISFBd/j9TUdM6GwCrVOYyMjESB09PTVFyloaGBD43GzyFJdh7g2FiQxDrr8/nhcnXh8eOfYDJlQa9PZzuHQ4oCx8bGyFiprq7mg7S0zHj3EoGJYIq8r68PT55U8aiRnSR1RYFzc3OQJIdy714xH1y48AVaW/+A2+05A4o5ICCVoK6uDteu5UGt1p0AHadNsdslpbKygmui0xlgsVj4lSQOcGKEXq8XL140QKfT82gVFBSAenGmhrEI8/MLz0ASn1lsmOnFEFCj0bPNo0c/YG1tLQqcnZ1FW1ubYjabIcRHuHnzG9rzwCammxilx+PFlStZPEJqtQbXrxdiaWkpCpyYmOA5vHr1KyQlJcNieQm/v+cMKFGofs3NTTCZMqBW66HValBbW4uVlZUocH5+Hk1NTYpen8rhV1T8zDWiB0/dtNlsrEnon8vlRk1NTXwGKVK6s7i4GAWGQiG0t7crd+7cxa1bd2GzdWJ0dBT9/f0YGhrC8PAw68HBQdZ01t7ehtu3v8WzZ7/wsA8MDGB1dRUiEonIsiwjEokokUgE+/v7iH17e3s4Pj7m9e7ubvyM7oXDYdb0HR0d4eDggNf/AsZf9x5talwLAAAAAElFTkSuQmCC"},"images":{"fallback":{"src":"/static/e1c371bfbe3d16ea5d3cdea8a375e002/baaed/filter_close.jpg","srcSet":"/static/e1c371bfbe3d16ea5d3cdea8a375e002/dd515/filter_close.jpg 200w,\n/static/e1c371bfbe3d16ea5d3cdea8a375e002/47930/filter_close.jpg 400w,\n/static/e1c371bfbe3d16ea5d3cdea8a375e002/baaed/filter_close.jpg 800w,\n/static/e1c371bfbe3d16ea5d3cdea8a375e002/b26d3/filter_close.jpg 1600w","sizes":"(min-width: 800px) 800px, 100vw"},"sources":[]},"width":800,"height":800}}}},"fields":{"path":"/projects/pf-slam/","readingTime":{"text":"15 min read"}},"tableOfContents":{"items":[{"url":"#report","title":"Report"},{"url":"#introduction","title":"Introduction"},{"url":"#importance-of-slam","title":"Importance of SLAM"},{"url":"#summary-of-approach","title":"Summary of Approach"},{"url":"#problem-formulation","title":"Problem Formulation"},{"url":"#problem-statement","title":"Problem Statement","items":[{"url":"#localization-problem","title":"Localization Problem"},{"url":"#mapping-problem","title":"Mapping Problem"},{"url":"#slam-problem","title":"SLAM Problem"}]},{"url":"#data-cleaning","title":"Data Cleaning","items":[{"url":"#fiber-optic-gyroscope","title":"Fiber Optic Gyroscope"},{"url":"#wheel-encoders","title":"Wheel Encoders"},{"url":"#lidar","title":"Lidar"},{"url":"#across-all-sensors","title":"Across All Sensors"}]},{"url":"#dead-reckoning","title":"Dead Reckoning","items":[{"url":"#motion-model","title":"Motion Model"},{"url":"#euler-integration","title":"Euler Integration"}]},{"url":"#particle-filter-slam","title":"Particle Filter SLAM","items":[{"url":"#initialize-particles","title":"Initialize Particles"},{"url":"#lidar-projection","title":"Lidar Projection"},{"url":"#initialize-map","title":"Initialize Map"},{"url":"#predict-new-particle-states","title":"Predict New Particle States"},{"url":"#update-particle-weights","title":"Update Particle Weights"},{"url":"#normalize-weights","title":"Normalize Weights"},{"url":"#estimate-robot-state","title":"Estimate Robot State"},{"url":"#update-map","title":"Update Map"},{"url":"#resample","title":"Resample"},{"url":"#filter-map","title":"Filter Map"},{"url":"#main-code-loop","title":"Main Code Loop"}]},{"url":"#results","title":"Results","items":[{"url":"#mapping","title":"Mapping"}]},{"url":"#questions","title":"Questions"}]}},"site":{"siteMetadata":{"title":"Patrick Youssef"}}},"pageContext":{"post_id":"/projects/pf-slam/"}},"staticQueryHashes":[]}